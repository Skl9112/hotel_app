{"ast":null,"code":"var _jsxFileName = \"C:\\\\hotel-app\\\\client\\\\src\\\\components\\\\PaymentsPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport './PaymentsPage.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PaymentsPage = () => {\n  _s();\n  const [payments, setPayments] = useState([]);\n  const [bookings, setBookings] = useState([]);\n  const [newPayment, setNewPayment] = useState({\n    booking_id: '',\n    amount: ''\n  });\n  useEffect(() => {\n    fetchPayments();\n    fetchBookings();\n  }, []);\n  const fetchPayments = async () => {\n    try {\n      const response = await axios.get('http://localhost:5000/payments');\n      setPayments(response.data);\n    } catch (error) {\n      console.error('Ошибка при загрузке платежей:', error.message);\n    }\n  };\n  const fetchBookings = async () => {\n    try {\n      const response = await axios.get('http://localhost:5000/bookings');\n      setBookings(response.data);\n    } catch (error) {\n      console.error('Ошибка при загрузке бронирований:', error.message);\n    }\n  };\n  const addPayment = async () => {\n    try {\n      await axios.post('http://localhost:5000/payments', {\n        booking_id: newPayment.booking_id\n      });\n      setNewPayment({\n        booking_id: '',\n        amount: ''\n      });\n      fetchPayments();\n    } catch (error) {\n      console.error('Ошибка при добавлении платежа:', error.message);\n    }\n  };\n  const deletePayment = async id => {\n    try {\n      await axios.delete(`http://localhost:5000/payments/${id}`);\n      fetchPayments();\n    } catch (error) {\n      console.error('Ошибка при удалении платежа:', error.message);\n    }\n  };\n  const handleBookingChange = e => {\n    const selectedBooking = bookings.find(booking => booking.id === parseInt(e.target.value));\n    setNewPayment({\n      booking_id: e.target.value,\n      amount: selectedBooking ? selectedBooking.total_price : ''\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"payments-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"\\u041F\\u043B\\u0430\\u0442\\u0435\\u0436\\u0438\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"payments-grid\",\n      children: payments.map(payment => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"payment-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"\\u041A\\u043B\\u0438\\u0435\\u043D\\u0442: \", payment.first_name, \" \", payment.last_name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"\\u041D\\u043E\\u043C\\u0435\\u0440: \", payment.comfort_level]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"\\u0414\\u0430\\u0442\\u0430 \\u043F\\u043B\\u0430\\u0442\\u0435\\u0436\\u0430: \", payment.payment_date]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"\\u0421\\u0443\\u043C\\u043C\\u0430: \", payment.amount, \" \\u0440\\u0443\\u0431.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => deletePayment(payment.id),\n          children: \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 13\n        }, this)]\n      }, payment.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"add-payment\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\u041E\\u0444\\u043E\\u0440\\u043C\\u0438\\u0442\\u044C \\u043F\\u043B\\u0430\\u0442\\u0435\\u0436\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        value: newPayment.booking_id,\n        onChange: handleBookingChange,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0437\\u0430\\u044F\\u0432\\u043A\\u0443\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this), bookings.map(booking => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: booking.id,\n          children: [booking.first_name, \" \", booking.last_name, \" - \", booking.comfort_level]\n        }, booking.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"\\u0421\\u0443\\u043C\\u043C\\u0430: \", newPayment.amount, \" \\u0440\\u0443\\u0431.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: addPayment,\n        disabled: !newPayment.booking_id,\n        children: \"\\u041F\\u0440\\u043E\\u0432\\u0435\\u0441\\u0442\\u0438 \\u043F\\u043B\\u0430\\u0442\\u0435\\u0436\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n};\n_s(PaymentsPage, \"QffoG/EijvY3KBWd4NIUWP+T+Ik=\");\n_c = PaymentsPage;\nexport default PaymentsPage;\nvar _c;\n$RefreshReg$(_c, \"PaymentsPage\");","map":{"version":3,"names":["React","useState","useEffect","axios","jsxDEV","_jsxDEV","PaymentsPage","_s","payments","setPayments","bookings","setBookings","newPayment","setNewPayment","booking_id","amount","fetchPayments","fetchBookings","response","get","data","error","console","message","addPayment","post","deletePayment","id","delete","handleBookingChange","e","selectedBooking","find","booking","parseInt","target","value","total_price","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","payment","first_name","last_name","comfort_level","payment_date","onClick","onChange","disabled","_c","$RefreshReg$"],"sources":["C:/hotel-app/client/src/components/PaymentsPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport './PaymentsPage.css';\r\n\r\nconst PaymentsPage = () => {\r\n  const [payments, setPayments] = useState([]);\r\n  const [bookings, setBookings] = useState([]);\r\n  const [newPayment, setNewPayment] = useState({\r\n    booking_id: '',\r\n    amount: '',\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetchPayments();\r\n    fetchBookings();\r\n  }, []);\r\n\r\n  const fetchPayments = async () => {\r\n    try {\r\n      const response = await axios.get('http://localhost:5000/payments');\r\n      setPayments(response.data);\r\n    } catch (error) {\r\n      console.error('Ошибка при загрузке платежей:', error.message);\r\n    }\r\n  };\r\n\r\n  const fetchBookings = async () => {\r\n    try {\r\n      const response = await axios.get('http://localhost:5000/bookings');\r\n      setBookings(response.data);\r\n    } catch (error) {\r\n      console.error('Ошибка при загрузке бронирований:', error.message);\r\n    }\r\n  };\r\n\r\n  const addPayment = async () => {\r\n    try {\r\n      await axios.post('http://localhost:5000/payments', { booking_id: newPayment.booking_id });\r\n      setNewPayment({ booking_id: '', amount: '' });\r\n      fetchPayments();\r\n    } catch (error) {\r\n      console.error('Ошибка при добавлении платежа:', error.message);\r\n    }\r\n  };\r\n\r\n  const deletePayment = async (id) => {\r\n    try {\r\n      await axios.delete(`http://localhost:5000/payments/${id}`);\r\n      fetchPayments();\r\n    } catch (error) {\r\n      console.error('Ошибка при удалении платежа:', error.message);\r\n    }\r\n  };\r\n\r\n  const handleBookingChange = (e) => {\r\n    const selectedBooking = bookings.find((booking) => booking.id === parseInt(e.target.value));\r\n    setNewPayment({\r\n      booking_id: e.target.value,\r\n      amount: selectedBooking ? selectedBooking.total_price : '',\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"payments-container\">\r\n      <h1>Платежи</h1>\r\n      <div className=\"payments-grid\">\r\n        {payments.map((payment) => (\r\n          <div className=\"payment-card\" key={payment.id}>\r\n            <h3>Клиент: {payment.first_name} {payment.last_name}</h3>\r\n            <p>Номер: {payment.comfort_level}</p>\r\n            <p>Дата платежа: {payment.payment_date}</p>\r\n            <p>Сумма: {payment.amount} руб.</p>\r\n            <button onClick={() => deletePayment(payment.id)}>Удалить</button>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      <div className=\"add-payment\">\r\n        <h2>Оформить платеж</h2>\r\n        <select\r\n          value={newPayment.booking_id}\r\n          onChange={handleBookingChange}\r\n        >\r\n          <option value=\"\">Выберите заявку</option>\r\n          {bookings.map((booking) => (\r\n            <option key={booking.id} value={booking.id}>\r\n              {booking.first_name} {booking.last_name} - {booking.comfort_level}\r\n            </option>\r\n          ))}\r\n        </select>\r\n        <p>Сумма: {newPayment.amount} руб.</p>\r\n        <button onClick={addPayment} disabled={!newPayment.booking_id}>\r\n          Провести платеж\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PaymentsPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}